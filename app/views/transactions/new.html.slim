= javascript_include_tag "https://js.braintreegateway.com/web/3.6.1/js/client.min.js"
= javascript_include_tag "https://js.braintreegateway.com/web/3.6.1/js/hosted-fields.min.js"

.large-9.large-centered.columns.white-box
  = form_tag do
    .hosted-field#card-number
    .hosted-field#cvv
    .hosted-field#expiration-date
    = hidden_field_tag :payment_method_nonce 
    = submit_tag 'Process Payment'  



javascript:
  var submit= $('input[type="submit"]');
  braintree.client.create({ 
    authorization: "#{@token}" 
  }, function (clientErr, clientInstance) {
    if (clientErr) {
      // do error stuff
      return;
    }
   braintree.hostedFields.create({
     client: clientInstance,
     styles: {
       'input': {
          'font-size': '16px' 
       },
       'input.invalid': {
          'color': 'red'
       },
       'input.valid': {
          'color': 'green' 
       }

     
     },
      fields: {
        number: {
          selector: '#card-number',
          placeholder: '4111 1111 1111 1111'
        },
        cvv: {
          selector: '#cvv',
          placeholder: '123'
        },
        expirationDate: {
          selector: '#expiration-date',
          placeholder: '10/2019' 
        }
      }
    },  function (hostedFieldsErr, hostedFieldsInstance) {
      if (hostedFieldsErr) {
        // do error stuff
        return;
      }
      submit.removeAttr('disabled');
    });
  });
  

